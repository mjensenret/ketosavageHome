@*@{ Layout = "~/Views/Shared/_lightLayout.cshtml"; }*@
@model KetoSavageWeb.Models.RegisterModel

@using (Html.BeginForm("Register", "Account", FormMethod.Post, new { id = "popupRegisterForm", @class = "edit_form" }))
{
    ViewContext.Writer.Write(Html.AntiForgeryToken().ToHtmlString());

    Html.DevExpress().FormLayout(form =>
    {
        form.Name = "RegisterFormLayout";
        form.RequiredMarkDisplayMode = RequiredMarkMode.RequiredOnly;
        form.SettingsItemCaptions.Location = LayoutItemCaptionLocation.Top;
        form.Width = Unit.Percentage(100);
        form.Height = Unit.Percentage(100);

        form.NestedExtensionWidth = Unit.Percentage(100);
        form.Items.Add(m => m.UserName, item =>
        {
            item.Caption = "Username";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = false;
            tbSettings.ShowModelErrors = true;
            tbSettings.Properties.ValidationSettings.Display = Display.Dynamic;
            tbSettings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.Text;
            tbSettings.Properties.ValidationSettings.ErrorTextPosition = ErrorTextPosition.Bottom;
        });
        form.Items.Add(m => m.Email, item =>
        {
            item.Caption = "Email Address";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = false;
            tbSettings.ShowModelErrors = true;
            tbSettings.Properties.ValidationSettings.Display = Display.Dynamic;
            tbSettings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.Text;
            tbSettings.Properties.ValidationSettings.ErrorTextPosition = ErrorTextPosition.Bottom;
        });
        form.Items.Add(m => m.FirstName, item =>
        {
            item.Caption = "First Name";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = false;
        });
        form.Items.Add(m => m.LastName, item =>
        {
            item.Caption = "Last Name";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = false;
        });
        form.Items.Add(m => m.Password, item =>
        {
            item.Caption = "Password";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = true;
            tbSettings.ShowModelErrors = true;
            tbSettings.Properties.ValidationSettings.Display = Display.Dynamic;
            tbSettings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.Text;
            tbSettings.Properties.ValidationSettings.ErrorTextPosition = ErrorTextPosition.Bottom;
        });
        form.Items.Add(m => m.ConfirmPassword, item =>
        {
            item.Caption = "Confirm Password";
            item.NestedExtensionType = FormLayoutNestedExtensionItemType.TextBox;
            var tbSettings = (TextBoxSettings)item.NestedExtensionSettings;
            tbSettings.Properties.Password = true;
            tbSettings.ShowModelErrors = true;
            tbSettings.Properties.ValidationSettings.Display = Display.Dynamic;
            tbSettings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.Text;
            tbSettings.Properties.ValidationSettings.ErrorTextPosition = ErrorTextPosition.Bottom;
        });

        form.Items.AddGroupItem(g =>
        {
            g.ColCount = 2;
            g.GroupBoxDecoration = GroupBoxDecoration.None;
            g.ShowCaption = DefaultBoolean.False;
            g.Paddings.Padding = 10;
            g.Items.Add(i =>
            {
                i.ShowCaption = DefaultBoolean.False;
                i.Paddings.Padding = 0;
                //i.Width = Unit.Percentage(100);
                i.HorizontalAlign = FormLayoutHorizontalAlign.Left;

                i.SetNestedContent(() =>
                {
                    Html.DevExpress().Button(
                        buttonSettings =>
                        {
                            buttonSettings.Name = "btnRegisterForm";
                            buttonSettings.ControlStyle.CssClass = "button";
                            buttonSettings.Width = 100;
                            buttonSettings.Text = "Register";
                            buttonSettings.UseSubmitBehavior = true;
                        }).Render();
                });
            });

            g.Items.Add(i =>
            {
                i.ShowCaption = DefaultBoolean.False;
                i.HorizontalAlign = FormLayoutHorizontalAlign.Right;
                i.SetNestedContent(() =>
                {
                    Html.DevExpress().Button(
                    buttonSettings =>
                    {
                        buttonSettings.Name = "btnRegisterFormCancel";
                        buttonSettings.ControlStyle.CssClass = "button";
                        buttonSettings.Width = 100;
                        buttonSettings.Text = "Cancel";
                        buttonSettings.ClientSideEvents.Click = "function(s, e){ popupControl.Hide(); }";
                    }).Render();
                });
            });
        });
    }).Render();
}